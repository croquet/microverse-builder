"use strict";(globalThis.webpackChunk_croquet_microverse=globalThis.webpackChunk_croquet_microverse||[]).push([[544],{1544:(t,e,i)=>{i.r(e),i.d(e,{default:()=>a});const a={modules:[{name:"Menu",actorBehaviors:[class MenuActor{setItems(s){this.items&&this.items.forEach(t=>{this.unsubscribe(t.card.id,"fire","fire"),t.card.destroy()}),this.items=[],this.maxWidth=0,this.maxHeight=0,this.extentMap=new Map;for(let a=0;a<s.length;a++){var h=s[a];let t=h.card;t=t||this.createCard({name:h.label,className:"TextFieldActor",translation:[0,0,0],parent:this,type:"text",margins:{left:8,top:0,right:16,bottom:0},readOnly:!0,singleLine:!0,autoResize:!0,noDismissButton:!0,runs:[{text:h.label}],behaviorModules:["MenuItem"],width:1,textScale:.0018,height:.15,noSave:!0,fullBright:!0,backgroundColor:h.selected?6316128:16777215});let e,i;(e=this._cardData.menuIcons&&void 0===(e=this._cardData.menuIcons[h.label])?this._cardData.menuIcons._:e)&&(i=this.createCard({name:h.label+" icon",translation:[0,0,0],parent:this,type:"2d",behaviorModules:["PropertySheetEdit"],dataLocation:"./assets/SVG/edit.svg",width:.1,height:.1,scale:[.04,.04,.04],depth:.02,noSave:!0,fullBright:!0,color:(h.selected,2236962)}));var r=t.measurement;this.extentMap.set(t.id,r),t._cardData.name=h.label,this.maxWidth=Math.max(this.maxWidth,r.width),this.items.push({label:h.label,card:t,selected:!!h.selected,iconCard:i}),this.subscribe(t.id,"fire","relay")}let e=0,d=(this.items.forEach(t=>{t=this.extentMap.get(t.card.id),t=t?t.height:.15;e+=t}),e/2);this.items.forEach(t=>{var e,i=this.extentMap.get(t.card.id),a=i?i.height:.15;t.card.set({translation:[((i?i.width:0)-this.maxWidth)/2,d-a/2,0]}),t.iconCard&&(e=((i?i.width:0)-this.maxWidth)/2,e+=i.width/2,t.iconCard.set({translation:[.01+e,d-a/2,.02]})),d-=void 0!==a?a:.15}),this.maxHeight=e+.1,this.setCardData({width:this.maxWidth+.2,height:this.maxHeight,depth:.05,color:16777215,frameColor:13421772,fullBright:!0}),this.say("itemsUpdated")}relay(e){let i=this._cardData.multiple,a=this.service("ActorManager").get(e.id),s=this.items.find(t=>t.card===a);var t;s&&(this.items.forEach(t=>{t.card===s.card?i?(t.selected=!t.selected,this.selectionChanged(t)):this.publish(this._parent.id,"fire",{action:s.label,id:this.id,viewId:e.viewId}):i||(t.selected=!1,this.selectionChanged(t))}),i&&"apply"===s.label&&(s.selected=!1,this.selectionChanged(s),t=this.items.map(t=>({label:t.label,selected:t.selected})),this.publish(this._parent.id,"fire",{selection:t,id:this.id})))}selectionChanged(t){t.card.setCardData({backgroundColor:t.selected?6316128:16777215})}}],pawnBehaviors:[class MenuPawn{setup(){this.listen("cardDataSet","cardDataUpdated"),this.actor.items&&0<this.actor.items.length&&0<this.actor.maxWidth&&0<this.actor.maxHeight&&this.cardDataUpdated()}cardDataUpdated(){let t=this.shape.children.find(t=>"2d"===t.name);t.position.set(0,0,-.1)}}]},{name:"MenuItem",actorBehaviors:[class MenuItemActor{setup(){}}],pawnBehaviors:[class MenuItemPawn{setup(){this.removeEventListener("pointerDoubleDown","onPointerDoubleDown"),this.addEventListener("pointerDoubleDown","nop"),this.addEventListener("pointerTap","click")}click(t){let e=this.actor.value;e.startsWith("-")||e.startsWith(" ")||this.publish(this.actor.id,"fire",{id:this.actor.id,name:this.actor._cardData.name,viewId:this.viewId})}}]}]}}}]);