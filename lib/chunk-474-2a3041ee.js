"use strict";(globalThis.webpackChunk_croquet_microverse=globalThis.webpackChunk_croquet_microverse||[]).push([[474],{4474:(e,t,o)=>{o.r(t),o.d(t,{default:()=>a});const a={modules:[{name:"Pendulum",actorBehaviors:[class PendulumActor{setup(){this.removeObjects();let r=this.translation;this.links=[...Array(10).keys()].map(e=>{let t;t=0===e?Worldcore.RAPIER.RigidBodyDesc.newKinematicPositionBased():Worldcore.RAPIER.RigidBodyDesc.newDynamic();let o;var a=[r[0],r[1]-2*e,r[2]],i="link"+e;(o=9===e?this.createCard({type:"3d",dataLocation:"3_EGjDfsBvE93taoFG1Uq6hS6MtH_JMHT33IaSwpij0gR1tbX1wVAABJRkNKXAFaXAFMXUBeWkpbAUZAAFoAaEt5TVZDZlxuRH5MbXdLHGhXTllWWHpkeHZ2HQBGQAFMXUBeWkpbAUJGTF1AWUpdXEoATHBmAldHRFZ5Wn9NYnpJSktgZVpESmRBRHt2YW1fYnV4W3gZXh1iRGQeegBLTltOAF1ment6SR0dQGhFHhhZfE1KYxdeGm12d1dCVUldf3pYaEoWRFoaSVlZF2I",modelType:"glb",translation:a,name:i,pendulumProto:!0,behaviorModules:["Rapier","PendulumLink"],noSave:!0}):this.createCard({type:"object",translation:a,name:i,behaviorModules:["Rapier","PendulumLink"],noSave:!0})).call("Rapier$RapierActor","createRigidBody",t);a=[(a=[.1,1])[1]/2,a[0]];let s=Worldcore.RAPIER.ColliderDesc.cylinder(...a);return s.setRestitution(.5),s.setFriction(1),9===e?s.setDensity(10):s.setDensity(1.5),o.call("Rapier$RapierActor","createCollider",s),o}),this.joints=[...Array(9).keys()].map(e=>{let t=this.createCard({type:"object",name:"joint"+e,behaviorModules:["Rapier"],noSave:!0});return t.call("Rapier$RapierActor","createImpulseJoint","ball",this.links[e],this.links[e+1],{x:0,y:-1,z:0},{x:0,y:1,z:0}),t}),this.jointProto=this.createCard({type:"object",name:name,pendulumProto:!0,parent:this,behaviorModules:["PendulumLink"]}),this.listen("setTranslation","translationSet")}translationSet(e){this.links&&this.links[0].say("setTranslation",e)}removeObjects(){this.links&&(this.links.forEach(e=>e.destroy()),this.links=null),this.joints&&(this.joints.forEach(e=>e.destroy()),this.joints=null)}}],pawnBehaviors:[class PendulumPawn{setup(){this.obj&&(this.shape.children.forEach(e=>this.shape.remove(e)),this.shape.children=[],this.obj.dispose(),this.obj=null);var e=new Worldcore.THREE.BoxGeometry(.2,.2,.2),t=new Worldcore.THREE.MeshStandardMaterial({color:this.actor._cardData.color||15632520});this.obj=new Worldcore.THREE.Mesh(e,t),this.obj.castShadow=this.actor._cardData.shadow,this.obj.receiveShadow=this.actor._cardData.shadow,this.shape.add(this.obj),this.removeEventListener("pointerDoubleDown","onPointerDoubleDown"),this.addEventListener("pointerDoubleDown","nop")}}]},{name:"PendulumLink",actorBehaviors:[class PendulumLinkActor{setup(){this.addEventListener("pointerTap","jolt")}jolt(){let e=this.rigidBody;e&&e.applyForce({x:40,y:0,z:0},!0)}}],pawnBehaviors:[class PendulumLinkPawn{setup(){var e,t;this.removeEventListener("pointerDoubleDown","onPointerDoubleDown"),this.addEventListener("pointerDoubleDown","nop"),this.actor._cardData.pendulumProto||(this.shape.children.forEach(e=>this.shape.remove(e)),this.shape.children=[],e=[.1,2.3],e=new Worldcore.THREE.CylinderGeometry(e[0],e[0],e[1],20),t=new Worldcore.THREE.MeshStandardMaterial({color:this.actor._cardData.color||13421772,metalness:.6}),this.obj=new Worldcore.THREE.Mesh(e,t),this.obj.castShadow=this.actor._cardData.shadow,this.obj.receiveShadow=this.actor._cardData.shadow,this.shape.add(this.obj))}}]}]}}}]);